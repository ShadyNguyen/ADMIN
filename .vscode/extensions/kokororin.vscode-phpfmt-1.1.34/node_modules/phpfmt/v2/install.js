var fs = require('fs');
var https = require('https');
var main = require('.');

console.log('Fetching fmt.stub.php from: ' + main.installUrl);

https
  .get(main.installUrl, function (res) {
    var dest = fs.createWriteStream(main.pharPath, {
      autoClose: true
    });
    res.pipe(dest).on('finish', function () {
      console.log(main.pharName + ' successfully installed!\n');
      process.exit(0);
    });
  })
  .on('error', function (err) {
    console.error('Error installing ' + main.pharName + ': ' + err.toString());
    process.exit(1);
  });
